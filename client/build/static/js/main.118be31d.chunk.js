(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,a,t){e.exports=t(98)},62:function(e,a,t){},63:function(e,a,t){},88:function(e,a,t){},98:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(25),s=t.n(l),o=(t(62),t(26));t(63);function i(e){var a=e.children;return r.a.createElement("div",{className:"list-overflow-container"},r.a.createElement("ul",{className:"list-group"},a))}function c(e){var a=e.children;return r.a.createElement("li",{className:"list-group-item"},a)}var u=t(12),m=t.n(u),d={getHabits:function(){return m.a.get("/api/habits")},getHabit:function(e){return m.a.get("/api/habits/"+e)},updateHabit:function(e){return console.log("util/API/ updateHabit",e._id,e),m.a.put("/api/habits/"+e._id,e)},deleteHabit:function(e){return console.log("util/API/ delHabit",e),m.a.delete("/api/habits/"+e)},saveHabit:function(e){return m.a.post("/api/habits",e)},getRewards:function(){return m.a.get("/api/rewards")},getReward:function(e){return m.a.get("/api/rewards/"+e)},deleteReward:function(e){return m.a.delete("/api/rewards/"+e)},saveReward:function(e){return m.a.post("/api/rewards",e)},login:function(e){return m.a.post("/api/users/login",e)},signup:function(e){return console.log("this is a route",e),m.a.post("/api/users/signup",e)},isLoggedIn:function(){return m.a.get("/api/users/profile")},logout:function(){return m.a.get("/api/users/logout")}};function p(e){var a=e.fluid,t=e.children;return r.a.createElement("div",{className:"container".concat(a?"-fluid":"")},t)}function g(e){var a=e.fluid,t=e.children;return r.a.createElement("div",{className:"row".concat(a?"-fluid":"")},t)}var h=function(){return r.a.createElement("span",{className:"btn-floating btn-large waves-effect waves-light red modal-trigger","data-target":"modal1"},r.a.createElement("i",{className:"material-icons"},"add"))},f=t(11);var E=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("a",{href:"#!",className:"brand-logo"},"Logo"),r.a.createElement("a",{href:"#","data-target":"mobile-demo",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Habits")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Rewards")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Login"))))),r.a.createElement("ul",{className:"sidenav",id:"mobile-demo"},r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Habits")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Rewards")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Login")))))},v=t(17),b=t(18),w=t(21),O=t(19),j=t(22),C=(t(46),t(36)),y=t.n(C),N=t(53),S=t(38),I=t(8),H="GET_HABITS",L="REMOVE_HABIT",k="CREATE_HABIT",P="UPDATE_HABIT",x="SET_CURRENT_HABIT",M=Object(n.createContext)(),T=M.Provider,_=function(e,a){switch(a.type){case H:return Object(I.a)({},e,{habits:Object(S.a)(a.habits)});case k:return Object(I.a)({},e,{habits:[a.habit].concat(Object(S.a)(e.habits))});case P:return Object(I.a)({},e,{habits:e.habits.map(function(e){return e._id===a._id?a.habit:e})});case L:return Object(I.a)({},e,{habits:e.habits.filter(function(e){return e._id!==a._id})});case x:return Object(I.a)({},e,{currentHabit:a.habit});default:return e}},U=function(e){e.value;var a=Object(N.a)(e,["value"]),t=Object(n.useReducer)(_,{habits:[],currentHabit:{}}),l=Object(o.a)(t,2),s=l[0],i=l[1];return r.a.createElement(T,Object.assign({value:[s,i]},a))},A=function(){return Object(n.useContext)(M)};var R=function(e){return r.a.createElement("button",{className:"modal-close btn-floating btn-large waves-effect waves-light green"},r.a.createElement("i",{className:"material-icons"},"add"))},F=t(20);var D=function(e){return console.log("in input function",e),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control"},e,{onChange:function(a){e.setform(Object(I.a)({},e.input,Object(F.a)({},e.name,a.target.value)))},value:e.input[e.name]})))};var B=function(){var e=A(),a=Object(o.a)(e,2),t=a[0],l=a[1];console.log("createHabitForm state.currentHabit",t.currentHabit);var s=Object(n.useState)({}),i=Object(o.a)(s,2),c=i[0],u=i[1];Object(n.useEffect)(function(){console.log("useEffect state.currentHabit state.currentHabit",t.currentHabit),u(t.currentHabit)},[t.currentHabit]),Object(n.useEffect)(function(){console.log("use effect formInput",c)},[c]);var m=function(e){u(e)};return r.a.createElement("div",null,r.a.createElement("h3",null," What habit to start you?"),r.a.createElement("form",{className:"form-group mt-5 mb-5",onSubmit:function(e){e.preventDefault(),void 0===t.currentHabit._id?(console.log("createing new - form",c),d.saveHabit({date:new Date(Date.now()),userId:"userId1",habitName:c.habitName,dayTotal:c.dayTotal,weight:c.weight}).then(function(e){console.log("Habit Saved res",e),l({type:k,habit:e.data})}).catch(function(e){return console.log(e)})):(console.log("Updating existing",c),d.updateHabit({_id:c._id,date:c.date,userId:"userId1",habitName:c.habitName,dayTotal:c.dayTotal,weight:c.weight}).then(function(e){console.log("Habit update res",e),l({type:P,habit:e.data})}).catch(function(e){return console.log(e)})),l({type:x,habit:{}}),u({}),e.target.habitName.value="",e.target.weight.value="",e.target.dayTotal.value=""}},r.a.createElement(D,{name:"habitName",placeholder:"Enter Habit (required)",setform:m,input:c}),r.a.createElement(D,{name:"weight",placeholder:"weight",setform:m,input:c}),r.a.createElement(D,{name:"dayTotal",placeholder:"dayTotal",setform:m,input:c}),r.a.createElement(R,null)))},W=function(e){function a(){return Object(v.a)(this,a),Object(w.a)(this,Object(O.a)(a).apply(this,arguments))}return Object(j.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){var e={onOpenStart:function(){console.log("Open Start"),a.open()},onOpenEnd:function(){console.log("Open End")},onCloseStart:function(){console.log("Close Start")},onCloseEnd:function(){console.log("Close End")},inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"};y.a.Modal.init(this.Modal,e);var a=y.a.Modal.getInstance(this.Modal)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:function(a){e.Modal=a},id:"modal1",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(B,null)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#",className:"modal-close waves-effect waves-purple btn-flat"},"Cancel"))))}}]),a}(n.Component);t(88);var z=function(e){return r.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")};var Z=function(){var e=A([]),a=Object(o.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){d.getHabits().then(function(e){l({type:H,habits:e.data})}).catch(function(e){return console.log("error in loadHabit",e)})},[]),console.log("habits : ",t.habits),r.a.createElement(p,{fluid:!0},r.a.createElement(E,null),r.a.createElement(g,null,r.a.createElement("h1",null,"Habits you have selected")),r.a.createElement(g,null,t.habits.length?r.a.createElement(i,null,t.habits.map(function(e){return r.a.createElement(c,{key:e._id},r.a.createElement("a",{className:"modal-trigger","data-target":"modal1",onClick:function(){return a=e._id,console.log("setCurrentHabit",a),void d.getHabit(a).then(function(e){console.log(e),l({type:x,habit:e.data})}).catch(function(e){return console.log(e)});var a}},e.habitName),e.weight,r.a.createElement(z,{onClick:function(){return a=e._id,console.log("deleteHabit"),void d.deleteHabit(a).then(function(){l({type:L,_id:a})}).catch(function(e){return console.log(e)});var a}}))})):r.a.createElement("h3",null," No habits yet specified")),r.a.createElement(g,null,r.a.createElement("a",{onClick:function(){l({type:x,habit:{}})}},r.a.createElement(h,null)),r.a.createElement(W,null)))},J=t(23),$=r.a.createContext(),q=$.Consumer,G=function(e){function a(){var e,t;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(w.a)(this,(e=Object(O.a)(a)).call.apply(e,[this].concat(r)))).state={firstname:"",lastname:"",email:"",username:"",password:"",loggedIn:!1,user:null,failureMessage:null},t.handleInputChange=function(e){var a=e.target.value,n=e.target.name;t.setState(Object(F.a)({},n,a))},t.handleLogin=function(e){e.preventDefault(),t.state.username&&t.state.password&&d.login({username:t.state.username,password:t.state.password}).then(function(e){e.data.loggedIn?(t.setState({loggedIn:!0,user:e.data.user}),console.log("log in successful"),window.location.href="/profile"):(console.log("Something went wrong :("),console.log(e))})},t.handleSignup=function(e){e.preventDefault(),t.state.username&&t.state.password&&d.signup({firstname:t.state.firstname,lastname:t.state.lastname,email:t.state.email,username:t.state.username,password:t.state.password}).then(function(e){e.data.loggedIn?(t.setState({loggedIn:!0,user:e.data.user}),console.log("log in successful"),window.location.href="/profile"):(console.log("something went wrong :("),console.log(e.data),t.setState({failureMessage:e.data}))})},t.isLoggedIn=function(){t.state.loggedIn||d.isLoggedIn().then(function(e){e.data.loggedIn?t.setState({loggedIn:!0,user:e.data.user}):console.log(e.data.message)})},t.logout=function(){t.state.loggedIn&&d.logout().then(function(){console.log("logged out successfully"),t.setState({loggedIn:!1,user:null})})},t}return Object(j.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){this.isLoggedIn()}},{key:"render",value:function(){var e={data:this.state,inputChange:this.handleInputChange,handleLogin:this.handleLogin,handleSignup:this.handleSignup,logout:this.logout};return r.a.createElement($.Provider,{value:e},this.props.children)}}]),a}(n.Component),V=t(54);var K=function(e){return r.a.createElement(q,null,function(e){var a=e.data,t=e.logout;return r.a.createElement("div",{className:"profileBox"},a.loggedIn?r.a.createElement("div",null,r.a.createElement("h1",null," Welcome back ",a.user.firstname),r.a.createElement(V.a,{onClick:t},"Logout")):r.a.createElement("div",null,r.a.createElement("h1",null," Log in to view this page "),r.a.createElement(f.b,{to:"/login"},r.a.createElement(V.a,null," Login "))))})},Q=t(99),X=t(100),Y=t(101),ee=t(102);var ae=function(e){return r.a.createElement("div",null,r.a.createElement("h2",{className:"loginTitle"},"Login"),r.a.createElement("hr",null),r.a.createElement(Q.a,null,r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"username"},"Username"),r.a.createElement(ee.a,{type:"text",name:"username",id:"username",placeholder:"username",value:e.username,onChange:e.handleInputChange})),r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"password"},"Password"),r.a.createElement(ee.a,{type:"password",name:"password",id:"password",placeholder:"password",value:e.password,onChange:e.handleInputChange})),r.a.createElement(V.a,{onClick:e.handleLogin,color:"primary",block:!0},"Login"),r.a.createElement("p",{className:"signupLink"},r.a.createElement(f.b,{to:"/signup"},"dont have an account?  Sign up here"))))},te=t(114),ne=t(103),re=function(e){function a(){var e,t;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(w.a)(this,(e=Object(O.a)(a)).call.apply(e,[this].concat(r)))).state={validFirstname:!1,validLastname:!1,validEmail:!1,validUsername:!1,validPassword:!1,confirmPassword:!1,password:"",passwordMessage:""},t.handleInputChange=function(e){var a=e.target.value,n=e.target.name;t.setState(Object(F.a)({},n,a))},t.validFirstname=function(){!t.state.validFirstname&&t.props.firstname.length>2&&t.setState({validFirstname:!0}),t.state.validFirstname&&t.props.firstname.length<2&&t.setState({validFirstname:!1})},t.validLastname=function(){!t.state.validLastname&&t.props.lastname.length>2&&t.setState({validLastname:!0}),t.state.validLastname&&t.props.lastname.length<2&&t.setState({validLastname:!1})},t.validateEmail=function(){var e=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t.props.email);!t.state.validEmail&&e&&t.setState({validEmail:!0}),t.state.validEmail&&!e&&t.setState({validEmail:!1})},t.validUsername=function(){t.props.username.length>4&&!t.state.validUsername&&t.setState({validUsername:!0}),t.props.username.length<4&&t.state.validUsername&&t.setState({validUsername:!1})},t.validatePassword=function(){var e=new RegExp(/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/).test(t.props.password);!t.state.validPassword&&e&&t.setState({validPassword:!0}),t.state.validPassword&&!e&&t.setState({validPassword:!1})},t.confirmPassword=function(){t.state.confirmPassword||""===t.state.password||t.state.password!==t.props.password||t.setState({confirmPassword:!0}),t.state.confirmPassword&&t.state.password!==t.props.password&&t.setState({confirmPassword:!1})},t.passwordMessage=function(){var e="at least 8 letters, 1 capital & 1 number";""===t.props.password||t.state.validPassword||t.state.passwordMessage===e||t.setState({passwordMessage:e}),t.state.validPassword&&""!==t.state.passwordMessage&&t.setState({passwordMessage:""}),t.state.passwordMessage===e&&""===t.props.password&&t.setState({passwordMessage:""})},t}return Object(j.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),this.validatePassword()}},{key:"componentDidUpdate",value:function(){this.confirmPassword(),this.validatePassword(),this.passwordMessage(),this.validateEmail(),this.validUsername(),this.validFirstname(),this.validLastname()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{className:"loginTitle"},"Signup"),r.a.createElement("hr",null),this.props.message?(r.a.createElement(te.a,{type:"danger"},this.props.message),console.log(this.props)):r.a.createElement("p",null),r.a.createElement(Q.a,null,r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"firstname"},"Firtname"),r.a.createElement(ee.a,{type:"text",name:"firstname",id:"firstname",placeholder:"firstname",value:this.props.firstname,onChange:this.props.handleInputChange,valid:this.state.validFirstname})),r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"lastname"},"Lastname"),r.a.createElement(ee.a,{type:"text",name:"lastname",id:"lastname",placeholder:"lastname",value:this.props.lastname,onChange:this.props.handleInputChange,valid:this.state.validLastname})),r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"email"},"Email"),r.a.createElement(ee.a,{type:"email",name:"email",id:"email",placeholder:"email@email.com",value:this.props.email,onChange:this.props.handleInputChange,valid:this.state.validEmail})),r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"username"},"Username"),r.a.createElement(ee.a,{type:"text",name:"username",id:"username",placeholder:"username",value:this.props.username,onChange:this.props.handleInputChange,valid:this.state.validUsername})),r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"password"},"Password"),r.a.createElement(ee.a,{type:"password",name:"password",id:"password",placeholder:"password",value:this.props.password,onChange:this.props.handleInputChange,valid:this.state.validPassword}),r.a.createElement(ne.a,null,this.state.passwordMessage)),r.a.createElement(X.a,null,r.a.createElement(Y.a,{for:"confirmPassword"},"Confirm Password"),r.a.createElement(ee.a,{type:"password",name:"password",id:"confirmPassword",placeholder:"confirm password",value:this.state.password,onChange:this.handleInputChange,valid:this.state.confirmPassword})),this.state.validFirstname&&this.state.validLastname&&this.state.validEmail&&this.state.validUsername&&this.state.validPassword&&this.state.confirmPassword?r.a.createElement(V.a,{onClick:this.props.handleSignup,color:"success",block:!0},"Signup"):r.a.createElement(V.a,{onClick:this.props.handleSignup,color:"danger",block:!0,disabled:!0},"Signup"),r.a.createElement("p",{className:"signupLink"},r.a.createElement(f.b,{to:"/login"},"already have an account?  Sign in here"))))}}]),a}(n.Component);var le=function(e){return r.a.createElement(q,null,function(a){var t=a.data,n=a.inputChange,l=a.handleLogin,s=a.handleSignup;return r.a.createElement("div",{className:"authBox"},"login"===e.action?r.a.createElement(ae,{username:t.username,password:t.password,handleInputChange:n,handleLogin:l}):r.a.createElement(re,{firstname:t.firstname,lastname:t.lastname,email:t.email,username:t.username,password:t.password,handleInputChange:n,handleSignup:s,message:t.failureMessage}))})};var se=function(){return r.a.createElement("h1",null,"No Match")},oe=t(3),ie=t(104),ce=t(105),ue=t(106),me=t(107),de=t(108),pe=t(109),ge=t(115),he=t(110),fe=t(111),Ee=t(112),ve=function(e){function a(e){var t;return Object(v.a)(this,a),(t=Object(w.a)(this,Object(O.a)(a).call(this,e))).toggle=t.toggle.bind(Object(oe.a)(Object(oe.a)(t))),t.state={isOpen:!1},t}return Object(j.a)(a,e),Object(b.a)(a,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ie.a,{className:"navbar",light:!0,expand:"md"},r.a.createElement(ce.a,{onClick:this.toggle}),r.a.createElement(ue.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(me.a,{className:"ml-auto",navbar:!0},r.a.createElement(de.a,null,r.a.createElement(pe.a,{href:"/"},"Home")),r.a.createElement(de.a,null,r.a.createElement(pe.a,{href:"/profile"},"Profile")),r.a.createElement(ge.a,{nav:!0,inNavbar:!0},r.a.createElement(he.a,{nav:!0,caret:!0},r.a.createElement("i",{className:"fas fa-user-secret"})),r.a.createElement(fe.a,{right:!0},r.a.createElement(Ee.a,null,r.a.createElement(pe.a,{href:"/login"},"Login")),r.a.createElement(Ee.a,null,r.a.createElement(pe.a,{href:"/signup"},"Signup"))))))))}}]),a}(n.Component),be=t(113);var we=function(){return r.a.createElement(G,null,r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(ve,null),r.a.createElement(be.a,null,r.a.createElement(J.c,null,r.a.createElement(J.a,{exact:!0,path:"/",component:Z}),r.a.createElement(J.a,{exact:!0,path:"/habits",component:Z}),r.a.createElement(J.a,{exact:!0,path:"/login",component:function(){return r.a.createElement(le,{action:"login"})}}),r.a.createElement(J.a,{exact:!0,path:"/signup",component:function(){return r.a.createElement(le,{action:"signup"})}}),r.a.createElement(J.a,{exact:!0,path:"/profile",component:K}),r.a.createElement(J.a,{component:se}))),r.a.createElement(U,null,r.a.createElement(J.c,null,r.a.createElement(J.a,{exact:!0,path:"/",component:Z}),r.a.createElement(J.a,{exact:!0,path:"/habits",component:Z}))))))},Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(we,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Oe?function(e){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):je(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):je(e)})}}()}},[[57,1,2]]]);
//# sourceMappingURL=main.118be31d.chunk.js.map